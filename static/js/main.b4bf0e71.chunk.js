(this["webpackJsonpcxl-cinema-frontend"]=this["webpackJsonpcxl-cinema-frontend"]||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=(a(85),a(18)),l=a(50),s=a(64),u=a(7),m=a(65),d=a.n(m),b=r.a.createContext({}),f=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},h=function(e){var t=e.children,a=Object(n.useState)("wss://echo.websocket.org"),c=Object(u.a)(a,2),o=c[0],m=c[1],h=Object(n.useState)(""),x=Object(u.a)(h,2),p=x[0],g=x[1],v=Object(n.useState)(!0),j=Object(u.a)(v,2),E=j[0],O=j[1],y=Object(n.useState)(""),w=Object(u.a)(y,2),C=w[0],N=w[1],k=Object(n.useState)([]),F=Object(u.a)(k,2),S=F[0],R=F[1],I=Object(n.useMemo)((function(){return{onOpen:function(){return console.log("Connection opened!")},share:!0,shouldReconnect:function(e){return!0}}}),[]),W=d()(o,I),M=Object(u.a)(W,3),z=M[0],D=M[1],J=M[2];Object(n.useEffect)((function(){C&&(m("wss://mighty-sea-25999.herokuapp.com/ws?room="+C),setInterval((function(){z(JSON.stringify({msg:"",room:C}))}),3e4))}),[C]),Object(n.useEffect)((function(){if(null!==D){var e=JSON.parse(D.data);e.msg?B(e):H(e)}}),[D]);var B=function(e){R((function(t){if(t.length>25){var a=Object(s.a)(t).slice(1);return[].concat(Object(l.a)(a),[Object(i.a)({},e,{id:f()})])}return[].concat(Object(l.a)(t),[Object(i.a)({},e,{id:f()})])}))},H=function(e){"video"===e.command&&(localStorage.setItem("last-video",e.argument),g(e.argument)),"pause"===e.command&&O(!1),"play"===e.command&&O(!0)};return r.a.createElement(b.Provider,{value:{sendMessage:function(e){z(JSON.stringify(Object(i.a)({},e,{room:C})))},messageHistory:S,srcVideo:p,current:E,roomName:C,setRoomName:N,readyState:J}},t)},x=a(120),p=a(125),g=Object(x.a)({container:{width:"100%",height:" 100vh",display:"flex",flexDirection:"column",background:"black"}}),v=function(e){var t=e.children,a=g();return r.a.createElement(p.a,{className:a.container},t)},j=a(69),E=a.n(j),O=a(130),y=a(129),w=a(122),C=Object(x.a)({avatarContainer:{background:"transparent",display:"flex",margin:"5px"},avatar:{width:30,height:30},card:{background:"#0000007d",display:"flex",opacity:"1",wordBreak:"break-all"},messageContainer:{margin:"auto 4px",minWidth:50},message:{lineHeight:"1.225",display:"flex",margin:"5px 0px",padding:"0px 4px",fontSize:"1.0rem",color:"white"},author:{lineHeight:"1.225",display:"flex",margin:"4px 0px 0px 3px",fontSize:"1.0rem",color:"#20d0a8",fontWeight:"bold"}});var N=function(e){var t=e.message,a=e.author,n=e.color,c=e.avatar,o=C();return r.a.createElement(O.a,{className:o.card},c&&r.a.createElement(p.a,{className:o.avatarContainer},r.a.createElement(y.a,{className:o.avatar})),r.a.createElement(p.a,{className:o.messageContainer},r.a.createElement(w.a,{className:o.author,style:{color:n}},a),r.a.createElement(w.a,{className:o.message},t)))},k=Object(x.a)({container:{width:"40vh",background:"transparent",display:"flex",overflow:"scroll",flexDirection:"column"},messageContainer:{margin:"8px 5px 0px 5px",display:"flex",justifyContent:"flex-start"}}),F=function(e){var t=e.message,a=e.author,c=e.color,o=e.avatar,i=k().messageContainer,l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],d=s[1];return Object(n.useEffect)((function(){d(!0),setTimeout((function(){d(!1)}),6500)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{when:m},r.a.createElement(p.a,{className:i},r.a.createElement(N,{message:t,author:a,color:c,avatar:o}))))},S=function(){var e=k(),t=Object(n.useContext)(b).messageHistory,a=Object(n.useRef)(null);return Object(n.useEffect)((function(){setTimeout((function(){a.current.scrollTop=1e18}),100)}),[t]),r.a.createElement("div",{className:e.container,ref:a},t.map((function(e){return r.a.createElement(F,{key:e.id,message:e.msg,author:e.author,color:e.color,avatar:e.avatar})})))},R=a(70),I=a.n(R),W=Object(x.a)({video:{width:"100% !important",height:"inherit !important",position:"absolute"}}),M=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useContext)(b),i=o.sendMessage,l=o.srcVideo,s=o.current,m=W();Object(n.useEffect)((function(){c(localStorage.getItem("last-video"))}),[]);return r.a.createElement(I.a,{className:m.video,url:l||a,playing:s,controls:!0,onPause:function(){s&&i({msg:"/pause video"})},onPlay:function(){!s&&i({msg:"/play video"})}})},z=Object(x.a)({videoContainer:{width:"100%",height:"92vh",background:"black",display:"flex",alignItems:"center"},chatContainer:{position:"relative",height:"70%",display:"flex",marginLeft:25}}),D=function(){var e=z();return r.a.createElement(p.a,{className:e.videoContainer},r.a.createElement(M,null),r.a.createElement(p.a,{className:e.chatContainer},r.a.createElement(S,null)))},J=a(123),B=a(127),H=a(71),P=a.n(H),T=a(72),A=a.n(T),V=Object(x.a)({containerInput:{width:"35%",background:"#0d0d0d",display:"flex",flexDirection:"row",border:"1px solid #5a5a5a",borderRadius:"5px",margin:"10px auto"},emoji:{width:"50px",background:"transparent",color:"#c0c0c0",display:"flex",justifyContent:"center",alignItems:"center"},submit:{width:"50px",background:"transparent",display:"flex",justifyContent:"center",alignItems:"center",color:"#c0c0c0"},input:{width:"95%",color:"#c0c0c0"}}),K=["name"],L=["#0baf15","#FD5B78","#FF6037","#FF9966","#FF9933","#FFCC33","#FFFF66","#CCFF00","#66FF66","#50BFE6","#FF6EFF","#20d0a8"],$=L[Math.round(Math.random()*L.length)],q=function(){var e=Object(n.useContext)(b),t=e.sendMessage,a=e.readyState,c=V(),o=Object(n.useRef)(""),i=function(e,n){var r=e.value,c=e.charCode,o=r.trim();13===c&&""!==o&&1===a&&(o.split("/name")[1]?function(e,t){var a=t.match(/^\/(\w*)\s(.*)/),n=Object(u.a)(a,3),r=n[1],c=n[2];e.includes(r)&&"name"===r&&localStorage.setItem("user-name",c)}(K,o):t({msg:o,color:$,author:localStorage.getItem("user-name")||"Anonymous"}),n.current.value="")};return r.a.createElement(p.a,{className:c.containerInput},r.a.createElement(J.a,{className:c.emoji,"aria-label":"emoji"},r.a.createElement(P.a,{size:"small"})),r.a.createElement(B.a,{className:c.input,placeholder:"Write a message",onKeyPress:function(e){var t=e.target.value,a=e.charCode;return i({value:t,charCode:a},o)},inputRef:o}),r.a.createElement(J.a,{className:c.submit,"aria-label":"send"},r.a.createElement(A.a,{size:"small"})))},G=a(126),Q=a(124),U=a(42),X=a.n(U),Y=Object(x.a)({root:{width:"185px",fontFamily:"monospace",fontSize:"15px",border:"1px solid #c0c0c0",fontWeight:"lighter",color:"#bbb8b8",padding:"10px 10px",borderRadius:"5px"},icon:{color:"white"},box:{width:"100%",height:"100vh"},head:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%",height:"5vh"},input:{textAlign:"center"},body:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",width:"100%",height:"25vh"},btn:{color:"white",border:"1px solid #191919",fontWeight:"lighter",width:"10vh",background:"#8a888cbd",borderRadius:"24px"}}),Z=function(e){var t=e.close,a=e.back,c=Y(),o=Object(n.useContext)(b).setRoomName,i=Object(n.useRef)("");return r.a.createElement(p.a,{className:c.box},r.a.createElement(p.a,{className:c.head},r.a.createElement(J.a,{className:c.icon,onClick:a},r.a.createElement(X.a,null))),r.a.createElement(p.a,{className:c.body},r.a.createElement(B.a,{classes:{root:c.root,input:c.input},placeholder:"Create a room name",inputRef:i}),r.a.createElement(Q.a,{className:c.btn,onClick:function(){return o(i.current.value),void t()}},"Create")))},_=Object(x.a)({root:{width:"185px",fontFamily:"monospace",fontSize:"15px",border:"1px solid #c0c0c0",fontWeight:"lighter",color:"#bbb8b8",padding:"10px 10px",borderRadius:"5px"},icon:{color:"white"},head:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%",height:"5vh"},body:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",width:"100%",height:"25vh"},input:{textAlign:"center"},box:{width:"100%",height:"100vh"},btn:{color:"white",border:"1px solid #191919",fontWeight:"lighter",width:"10vh",background:"#8a888cbd",borderRadius:"24px"}}),ee=function(e){var t=e.close,a=e.back,c=_(),o=Object(n.useContext)(b).setRoomName,i=Object(n.useRef)("");return r.a.createElement(p.a,{className:c.box},r.a.createElement(p.a,{className:c.head},r.a.createElement(J.a,{className:c.icon,onClick:a},r.a.createElement(X.a,null))),r.a.createElement(p.a,{className:c.body},r.a.createElement(B.a,{classes:{root:c.root,input:c.input},placeholder:"Enter a room name",inputRef:i}),r.a.createElement(Q.a,{className:c.btn,onClick:function(){return o(i.current.value),void t()}},"Join")))},te=Object(x.a)({button:{textTransform:"initial",width:"155px",fontFamily:"monospace",fontSize:"15px",border:"1px solid #c0c0c0",fontWeight:"lighter",color:"#bbb8b8"}}),ae=function(e){var t=e.create,a=e.join,n=te();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{className:n.button,onClick:t},"Create Room"),r.a.createElement(Q.a,{className:n.button,onClick:a},"Join Room"))},ne=Object(x.a)({box:{borderRadius:"10px",width:"50vh",height:"30vh",background:"transparent",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly",border:"1px solid #c0c0c0",outline:"none"}}),re=function(e){var t=e.close,a=Object(n.useState)({create:!1,join:!1}),c=Object(u.a)(a,2),o=c[0],l=c[1],s=function(){l(Object(i.a)({},o,{create:!1,join:!1}))},m=ne();return r.a.createElement(p.a,{className:m.box},o.create?r.a.createElement(Z,{close:t,back:s}):o.join?r.a.createElement(ee,{close:t,back:s}):r.a.createElement(ae,{create:function(){l(Object(i.a)({},o,{create:!0}))},join:function(){l(Object(i.a)({},o,{join:!0}))}}))},ce=Object(x.a)({modal:{alignItems:"center",display:"flex",justifyContent:"center"}}),oe=function(){var e=Object(n.useState)(!0),t=Object(u.a)(e,2),a=t[0],c=t[1],o=ce();return r.a.createElement(G.a,{open:a,className:o.modal},r.a.createElement(re,{close:function(){c(!1)}}))},ie=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null,r.a.createElement(oe,null),r.a.createElement(v,null,r.a.createElement(D,null),r.a.createElement(q,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,a){e.exports=a(103)},85:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.b4bf0e71.chunk.js.map