(this["webpackJsonpcxl-cinema-frontend"]=this["webpackJsonpcxl-cinema-frontend"]||[]).push([[0],{122:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(12),o=a.n(r),i=(a(80),a(33)),l=a(19),s=a(47),u=a(59),m=a(5),d=c.a.createContext({}),f=a(60),b=a.n(f),h=function(e){var t=e.message,a=e.roomName,c=e.retrieveData,r=e.setReadyState,o="wss://mighty-sea-25999.herokuapp.com/ws?room=",i=Object(n.useMemo)((function(){return{onOpen:function(){return console.log("Connection opened!")},share:!0,shouldReconnect:function(e){return!0}}}),[]),l=Object(n.useState)(o),s=Object(m.a)(l,2),u=s[0],d=s[1],f=b()(u,i),h=Object(m.a)(f,3),x=h[0],p=h[1],g=h[2];return Object(n.useEffect)((function(){if(null!==p){var e=JSON.parse(p.data);c(e)}}),[p]),Object(n.useEffect)((function(){t&&x(t)}),[t]),Object(n.useEffect)((function(){1===g&&r(!0)}),[g]),Object(n.useEffect)((function(){var e;return a&&(d(o+a),e=setInterval((function(){x(JSON.stringify({msg:"",room:a}))}),3e4)),function(){e&&clearInterval(e)}}),[a]),null},x=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},p=function(e){var t=e.children,a=Object(n.useState)(""),r=Object(m.a)(a,2),o=r[0],f=r[1],b=Object(n.useState)(0),p=Object(m.a)(b,2),g=p[0],j=p[1],v=Object(n.useState)(!0),O=Object(m.a)(v,2),E=O[0],y=O[1],C=Object(n.useState)(""),w=Object(m.a)(C,2),N=w[0],S=w[1],k=Object(n.useState)(""),F=Object(m.a)(k,2),R=F[0],I=F[1],W=Object(n.useState)([]),D=Object(m.a)(W,2),M=D[0],z=D[1],J=Object(n.useState)(!1),B=Object(m.a)(J,2),P=B[0],T=B[1],H=Object(i.c)("room",i.b),A=Object(m.a)(H,1)[0];Object(n.useEffect)((function(){A&&S(A)}),[A]);var V=function(e){z((function(t){if(t.length>25){var a=Object(u.a)(t).slice(1);return[].concat(Object(s.a)(a),[Object(l.a)({},e,{id:x()})])}return[].concat(Object(s.a)(t),[Object(l.a)({},e,{id:x()})])}))},K=function(e){var t=e.command,a=e.argument;"video"===t&&(localStorage.setItem("last-video",a),f(a)),"pause"===t&&y(!1),"play"===t&&y(!0),"seek"===t&&j(a)};return c.a.createElement(d.Provider,{value:{sendMessage:function(e){I(JSON.stringify(Object(l.a)({},e,{id:x(),room:N})))},messageHistory:M,srcVideo:o,current:E,time:g,roomName:N,setRoomName:S,readyState:P}},t,N?c.a.createElement(h,{roomName:N,retrieveData:function(e){e.msg?V(e):K(e)},message:R,setReadyState:T}):c.a.createElement(c.a.Fragment,null))},g=a(139),j=a(144),v=Object(g.a)({container:{width:"100%",height:" 100vh",display:"flex",flexDirection:"column",background:"black"}}),O=function(e){var t=e.children,a=v();return c.a.createElement(j.a,{className:a.container},t)},E=a(64),y=a.n(E),C=a(149),w=a(148),N=a(141),S=Object(g.a)({avatarContainer:{background:"transparent",display:"flex",margin:"5px"},avatar:{width:30,height:30},card:{background:"#0000007d",display:"flex",opacity:"1",wordBreak:"break-all"},messageContainer:{margin:"auto 4px",minWidth:50},message:{lineHeight:"1.225",display:"flex",margin:"5px 0px",padding:"0px 4px",fontSize:"1.0rem",color:"white"},author:{lineHeight:"1.225",display:"flex",margin:"4px 0px 0px 3px",fontSize:"1.0rem",color:"#20d0a8",fontWeight:"bold"}});var k=function(e){var t=e.message,a=e.author,n=e.color,r=e.avatar,o=S();return c.a.createElement(C.a,{className:o.card},r&&c.a.createElement(j.a,{className:o.avatarContainer},c.a.createElement(w.a,{className:o.avatar})),c.a.createElement(j.a,{className:o.messageContainer},c.a.createElement(N.a,{className:o.author,style:{color:n}},a),c.a.createElement(N.a,{className:o.message},t)))},F=Object(g.a)({container:{width:"40vh",background:"transparent",display:"flex",overflow:"scroll",flexDirection:"column"},messageContainer:{margin:"8px 5px 0px 5px",display:"flex",justifyContent:"flex-start"}}),R=function(e){var t=e.message,a=e.author,r=e.color,o=e.avatar,i=F().messageContainer,l=Object(n.useState)(!1),s=Object(m.a)(l,2),u=s[0],d=s[1];return Object(n.useEffect)((function(){d(!0),setTimeout((function(){d(!1)}),6500)}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,{when:u},c.a.createElement(j.a,{className:i},c.a.createElement(k,{message:t,author:a,color:r,avatar:o}))))},I=function(){var e=F(),t=Object(n.useContext)(d).messageHistory,a=Object(n.useRef)(null);return Object(n.useEffect)((function(){setTimeout((function(){a.current.scrollTop=1e18}),100)}),[t]),c.a.createElement("div",{className:e.container,ref:a},t.map((function(e){return c.a.createElement(R,{key:e.id,message:e.msg,author:e.author,color:e.color,avatar:e.avatar})})))},W=a(65),D=a.n(W),M=Object(g.a)({video:{width:"100% !important",height:"inherit !important",position:"absolute"}}),z=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(0),i=Object(m.a)(o,2),l=i[0],s=i[1],u=Object(n.useState)(null),f=Object(m.a)(u,2),b=f[0],h=f[1],x=Object(n.useContext)(d),p=x.sendMessage,g=x.srcVideo,j=x.current,v=x.time,O=M();Object(n.useEffect)((function(){r(localStorage.getItem("last-video"))}),[]),Object(n.useEffect)((function(){0!==v&&b.seekTo(v)}),[v]);return c.a.createElement(D.a,{className:O.video,url:g||a,playing:j,controls:!0,onProgress:function(e){var t=e.playedSeconds-l;(t>2||t<0)&&p({msg:"/seek "+e.playedSeconds}),s(e.playedSeconds)},onReady:function(e){h(e)},onPause:function(){j&&p({msg:"/pause video"})},onPlay:function(){!j&&p({msg:"/play video"})}})},J=Object(g.a)({videoContainer:{width:"100%",height:"92vh",background:"black",display:"flex",alignItems:"center"},chatContainer:{position:"relative",height:"70%",display:"flex",marginLeft:25}}),B=function(){var e=J();return c.a.createElement(j.a,{className:e.videoContainer},c.a.createElement(z,null),c.a.createElement(j.a,{className:e.chatContainer},c.a.createElement(I,null)))},P=a(142),T=a(146),H=a(66),A=a.n(H),V=a(67),K=a.n(V),L=Object(g.a)({containerInput:{width:"35%",background:"#0d0d0d",display:"flex",flexDirection:"row",border:"1px solid #5a5a5a",borderRadius:"5px",margin:"10px auto"},emoji:{width:"50px",background:"transparent",color:"#c0c0c0",display:"flex",justifyContent:"center",alignItems:"center"},submit:{width:"50px",background:"transparent",display:"flex",justifyContent:"center",alignItems:"center",color:"#c0c0c0"},input:{width:"95%",color:"#c0c0c0"}}),$=["name"],q=["#0baf15","#FD5B78","#FF6037","#FF9966","#FF9933","#FFCC33","#FFFF66","#CCFF00","#66FF66","#50BFE6","#FF6EFF","#20d0a8"],G=q[Math.round(Math.random()*q.length)],Q=function(){var e=Object(n.useContext)(d),t=e.sendMessage,a=e.readyState,r=L(),o=Object(n.useRef)(""),i=function(e,n){var c=e.value,r=e.charCode,o=c.trim();13===r&&""!==o&&a&&(o.split("/name")[1]?function(e,t){var a=t.match(/^\/(\w*)\s(.*)/),n=Object(m.a)(a,3),c=n[1],r=n[2];e.includes(c)&&"name"===c&&localStorage.setItem("user-name",r)}($,o):t({msg:o,color:G,author:localStorage.getItem("user-name")||"Anonymous"}),n.current.value="")};return c.a.createElement(j.a,{className:r.containerInput},c.a.createElement(P.a,{className:r.emoji,"aria-label":"emoji"},c.a.createElement(A.a,{size:"small"})),c.a.createElement(T.a,{className:r.input,placeholder:"Write a message",onKeyPress:function(e){var t=e.target.value,a=e.charCode;return i({value:t,charCode:a},o)},inputRef:o}),c.a.createElement(P.a,{className:r.submit,"aria-label":"send"},c.a.createElement(K.a,{size:"small"})))},U=a(145),X=a(143),Y=a(43),Z=a.n(Y),_=Object(g.a)({root:{width:"185px",fontFamily:"monospace",fontSize:"15px",border:"1px solid #c0c0c0",fontWeight:"lighter",color:"#bbb8b8",padding:"10px 10px",borderRadius:"5px"},icon:{color:"white"},box:{width:"100%",height:"100vh"},head:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%",height:"5vh"},input:{textAlign:"center"},body:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",width:"100%",height:"25vh"},btn:{color:"white",border:"1px solid #191919",fontWeight:"lighter",width:"10vh",background:"#8a888cbd",borderRadius:"24px"}}),ee=function(e){var t=e.close,a=e.back,r=_(),o=Object(n.useContext)(d).setRoomName,i=Object(n.useRef)("");return c.a.createElement(j.a,{className:r.box},c.a.createElement(j.a,{className:r.head},c.a.createElement(P.a,{className:r.icon,onClick:a},c.a.createElement(Z.a,null))),c.a.createElement(j.a,{className:r.body},c.a.createElement(T.a,{classes:{root:r.root,input:r.input},placeholder:"Create a room name",inputRef:i}),c.a.createElement(X.a,{className:r.btn,onClick:function(){return o(i.current.value),void t()}},"Create")))},te=Object(g.a)({root:{width:"185px",fontFamily:"monospace",fontSize:"15px",border:"1px solid #c0c0c0",fontWeight:"lighter",color:"#bbb8b8",padding:"10px 10px",borderRadius:"5px"},icon:{color:"white"},head:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%",height:"5vh"},body:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",width:"100%",height:"25vh"},input:{textAlign:"center"},box:{width:"100%",height:"100vh"},btn:{color:"white",border:"1px solid #191919",fontWeight:"lighter",width:"10vh",background:"#8a888cbd",borderRadius:"24px"}}),ae=function(e){var t=e.close,a=e.back,r=te(),o=Object(n.useContext)(d).setRoomName,i=Object(n.useRef)("");return c.a.createElement(j.a,{className:r.box},c.a.createElement(j.a,{className:r.head},c.a.createElement(P.a,{className:r.icon,onClick:a},c.a.createElement(Z.a,null))),c.a.createElement(j.a,{className:r.body},c.a.createElement(T.a,{classes:{root:r.root,input:r.input},placeholder:"Enter a room name",inputRef:i}),c.a.createElement(X.a,{className:r.btn,onClick:function(){return o(i.current.value),void t()}},"Join")))},ne=Object(g.a)({button:{textTransform:"initial",width:"155px",fontFamily:"monospace",fontSize:"15px",border:"1px solid #c0c0c0",fontWeight:"lighter",color:"#bbb8b8"}}),ce=function(e){var t=e.create,a=e.join,n=ne();return c.a.createElement(c.a.Fragment,null,c.a.createElement(X.a,{className:n.button,onClick:t},"Create Room"),c.a.createElement(X.a,{className:n.button,onClick:a},"Join Room"))},re=Object(g.a)({box:{borderRadius:"10px",width:"50vh",height:"30vh",background:"transparent",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"space-evenly",border:"1px solid #c0c0c0",outline:"none"}}),oe=function(e){var t=e.close,a=Object(n.useState)({create:!1,join:!1}),r=Object(m.a)(a,2),o=r[0],i=r[1],s=function(){i(Object(l.a)({},o,{create:!1,join:!1}))},u=re();return c.a.createElement(j.a,{className:u.box},o.create?c.a.createElement(ee,{close:t,back:s}):o.join?c.a.createElement(ae,{close:t,back:s}):c.a.createElement(ce,{create:function(){i(Object(l.a)({},o,{create:!0}))},join:function(){i(Object(l.a)({},o,{join:!0}))}}))},ie=Object(g.a)({modal:{alignItems:"center",display:"flex",justifyContent:"center"}}),le=function(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],r=t[1],o=Object(n.useContext)(d).roomName;Object(n.useEffect)((function(){r(!o)}),[o]);var i=ie();return c.a.createElement(U.a,{open:a,className:i.modal},c.a.createElement(oe,{close:function(){r(!1)}}))},se=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,null,c.a.createElement(p,null,c.a.createElement(le,null),c.a.createElement(O,null,c.a.createElement(B,null),c.a.createElement(Q,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,a){e.exports=a(122)},80:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.3864e5da.chunk.js.map