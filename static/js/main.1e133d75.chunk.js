(this["webpackJsonpcxl-cinema-frontend"]=this["webpackJsonpcxl-cinema-frontend"]||[]).push([[0],{51:function(e,a,t){e.exports=t(69)},56:function(e,a,t){},69:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(15),c=t.n(o),s=(t(56),t(46)),i=t(8),l=t(39),m=t.n(l),u=t(87),d=t(89),f=Object(u.a)({container:{width:"100%",height:" 100vh",display:"flex",flexDirection:"column",background:"black"},chatVideo:{display:"flex",flexDirection:"row",width:"100%",height:"100vh"}}),g=r.a.forwardRef((function(e){var a=e.videoContainer,t=e.inputMessage,n=f();return r.a.createElement(d.a,{className:n.container},r.a.createElement(d.a,{className:n.chatVideo},a),t)})),h=t(43),p=t.n(h),v=t(94),b=t(93),x=t(88),E=Object(u.a)({avatarContainer:{background:"transparent",display:"flex",margin:"5px"},avatar:{width:30,height:30},card:{background:"#0000007d",display:"flex",opacity:"1",wordBreak:"break-all"},messageContainer:{margin:"auto 4px",minWidth:50},message:{lineHeight:"1.225",display:"flex",margin:"5px 0px",padding:"0px 4px",fontSize:"0.8rem",color:"white"},author:{lineHeight:"1.225",display:"flex",margin:"4px 0px 0px 3px",fontSize:"0.8rem",color:"#20d0a8",fontWeight:"bold"}});var w=function(e){var a=e.message,t=e.author,n=e.color,o=e.avatar,c=E();return r.a.createElement(v.a,{className:c.card},o&&r.a.createElement(d.a,{className:c.avatarContainer},r.a.createElement(b.a,{className:c.avatar})),r.a.createElement(d.a,{className:c.messageContainer},r.a.createElement(x.a,{className:c.author,style:{color:n}},t),r.a.createElement(x.a,{className:c.message},a)))},j=Object(u.a)({container:{width:"40vh",background:"transparent",display:"flex",overflow:"scroll",flexDirection:"column"},messageContainer:{margin:"8px 5px 0px 5px",display:"flex",justifyContent:"flex-start"}}),y=function(e){var a=e.message,t=e.author,o=e.color,c=e.avatar,s=j().messageContainer,l=Object(n.useState)(!1),m=Object(i.a)(l,2),u=m[0],f=m[1];return Object(n.useEffect)((function(){f(!0),setTimeout((function(){f(!1)}),65e6)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{when:u},r.a.createElement(d.a,{className:s},r.a.createElement(w,{message:a,author:t,color:o,avatar:c}))))},O=r.a.forwardRef((function(e,a){var t=e.messages,n=j();return r.a.createElement("div",{className:n.container,ref:a},t.map((function(e,a){var n=t.length>20?t.length-20:0;return e.msg&&a>=n&&r.a.createElement(y,{key:a,message:e.msg,author:e.author,color:e.color,avatar:e.avatar})})))})),C=Object(u.a)({video:{height:"92vh",position:"absolute",width:"100%"}}),F=function(e){var a=e.srcVideo,t=Object(n.useState)(""),o=Object(i.a)(t,2),c=o[0],s=o[1],l=C();return Object(n.useEffect)((function(){s(localStorage.getItem("last-video"))}),[]),r.a.createElement("video",{controls:!0,className:l.video,src:a||c,autoPlay:!0},r.a.createElement("source",{src:a||c,type:"video/mp4"}))},N=Object(u.a)({videoContainer:{width:"100%",height:"92vh",background:"black",display:"flex",alignItems:"center"},chatContainer:{position:"relative",height:"70%",display:"flex",marginLeft:25}}),k=r.a.forwardRef((function(e,a){var t=e.messages,n=e.srcVideo,o=N();return r.a.createElement(d.a,{className:o.videoContainer},r.a.createElement(F,{srcVideo:n}),r.a.createElement(d.a,{className:o.chatContainer},r.a.createElement(O,{messages:t,ref:a})))})),S=t(90),I=t(91),M=t(44),R=t.n(M),V=t(45),B=t.n(V),D=Object(u.a)({containerInput:{width:"35%",background:"#0d0d0d",display:"flex",flexDirection:"row",border:"1px solid #5a5a5a",borderRadius:"5px",margin:"10px auto"},emoji:{width:"50px",background:"transparent",color:"#c0c0c0",display:"flex",justifyContent:"center",alignItems:"center"},submit:{width:"50px",background:"transparent",display:"flex",justifyContent:"center",alignItems:"center",color:"#c0c0c0"},input:{width:"95%",color:"#c0c0c0"}}),W=["name"],z=["#0baf15","#FD5B78","#FF6037","#FF9966","#FF9933","#FFCC33","#FFFF66","#CCFF00","#66FF66","#50BFE6","#FF6EFF","#20d0a8"],J=z[Math.round(Math.random()*z.length)],T=function(e){var a=e.sendMessage,t=D(),o=Object(n.useRef)(""),c=function(e,t){var n=e.value,r=e.charCode,o=n.trim();13===r&&""!==o&&(o.split("/name")[1]?function(e,a){var t=a.match(/^\/(\w*)\s(.*)/),n=Object(i.a)(t,3),r=n[1],o=n[2];e.includes(r)&&"name"===r&&localStorage.setItem("user-name",o)}(W,o):a(JSON.stringify({msg:o,color:J,author:localStorage.getItem("user-name")||"Anonymous"})),t.current.value="")};return r.a.createElement(d.a,{className:t.containerInput},r.a.createElement(S.a,{className:t.emoji,"aria-label":"emoji"},r.a.createElement(R.a,{size:"small"})),r.a.createElement(I.a,{className:t.input,placeholder:"Write a message",onKeyPress:function(e){var a=e.target.value,t=e.charCode;return c({value:a,charCode:t},o)},inputRef:o}),r.a.createElement(S.a,{className:t.submit,"aria-label":"send"},r.a.createElement(B.a,{size:"small"})))},A=function(){var e=Object(n.useState)(""),a=Object(i.a)(e,2),t=a[0],o=a[1],c=Object(n.useState)([]),l=Object(i.a)(c,2),u=l[0],d=l[1],f=Object(n.useMemo)((function(){return{onOpen:function(){return console.log("Connection opened!")},shouldReconnect:function(e){return!0}}}),[]),h=m()("wss://mighty-sea-25999.herokuapp.com/ws",f),p=Object(i.a)(h,2),v=p[0],b=p[1],x=Object(n.useRef)("");return Object(n.useEffect)((function(){if(null!==b){var e=JSON.parse(b.data);e.msg?function(e,a){d((function(a){return[].concat(Object(s.a)(a),[e])})),setTimeout((function(){a.current.scrollTop=1e22}),150)}(e,x):"video"===(a=e).command&&(console.log(a.argument),localStorage.setItem("last-video",a.argument),o(a.argument))}var a}),[b]),r.a.createElement("div",{className:"App"},r.a.createElement(g,{inputMessage:r.a.createElement(T,{sendMessage:v}),videoContainer:r.a.createElement(k,{messages:u,srcVideo:t,ref:x})}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.1e133d75.chunk.js.map